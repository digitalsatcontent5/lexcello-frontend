<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6EV4Y6N8M5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-6EV4Y6N8M5');
    </script>
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LNAT Error Log - Track Your Mistakes | Lexcello</title>
    <meta name="description" content="Track and analyze your LNAT practice test mistakes with our interactive error log. Identify patterns and improve your performance systematically.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #1a365d;
            --primary-hover: #2d4a66;
            --secondary-color: #2b6cb0;
            --accent-gold: #d69e2e;
            --text-dark: #1a202c;
            --text-light: #4a5568;
            --bg-light: #f7fafc;
            --success-color: #48bb78;
            --warning-color: #ed8936;
            --danger-color: #e53e3e;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--bg-light);
            padding-top: 80px;
        }
        
        /* Navigation */
        .navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 1rem 0;
        }
        
        .navbar-brand {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary-color) !important;
            letter-spacing: -1px;
        }
        
        .nav-link {
            font-weight: 500;
            color: var(--text-dark) !important;
            margin: 0 0.5rem;
        }
        
        /* Page Header */
        .page-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 60px 0 40px;
            text-align: center;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .page-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        /* Warning Box */
        .data-warning {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .data-warning h5 {
            color: #856404;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .data-warning ul {
            color: #856404;
            margin-bottom: 15px;
        }
        
        .backup-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        /* Form Styles */
        .error-form {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .form-section {
            margin-bottom: 25px;
        }
        
        .form-section h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .form-control, .form-select {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px 15px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 0.25rem rgba(43, 108, 176, 0.15);
        }
        
        .btn-primary {
            background: var(--secondary-color);
            border-color: var(--secondary-color);
            padding: 12px 24px;
            font-weight: 600;
            border-radius: 8px;
        }
        
        .btn-primary:hover {
            background: var(--primary-hover);
            border-color: var(--primary-hover);
        }
        
        /* Error Log Table */
        .error-log-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        
        .error-log-header {
            background: var(--primary-color);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .error-log-header h3 {
            margin: 0;
            font-weight: 600;
        }
        
        .log-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.875rem;
        }
        
        .error-table {
            width: 100%;
            margin: 0;
        }
        
        .error-table th {
            background: var(--bg-light);
            color: var(--text-dark);
            padding: 15px 12px;
            font-weight: 600;
            border-bottom: 2px solid #e2e8f0;
            font-size: 0.9rem;
        }
        
        .error-table td {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
            vertical-align: middle;
            font-size: 0.9rem;
        }
        
        .error-table tr:hover {
            background: #f8f9fa;
        }
        
        .error-category {
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .category-misread { background: #fed7d7; color: #742a2a; }
        .category-time { background: #fefcbf; color: #744210; }
        .category-knowledge { background: #bee3f8; color: #2c5282; }
        .category-elimination { background: #c6f6d5; color: #22543d; }
        .category-distractor { background: #e9d8fd; color: #553c9a; }
        .category-detail { background: #fed7e2; color: #97266d; }
        
        .delete-btn {
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
        }
        
        .delete-btn:hover {
            background: #c53030;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .error-table {
                font-size: 0.8rem;
            }
            
            .error-table th,
            .error-table td {
                padding: 8px;
            }
            
            .page-header h1 {
                font-size: 2rem;
            }
            
            .log-controls {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* Print Styles */
        @media print {
            .navbar, .data-warning, .error-form, .btn, .delete-btn { display: none !important; }
            .error-log-container { box-shadow: none; }
            .error-log-header { background: #333 !important; }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">Lexcello</a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html#tests">Practice Tests</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about-lnat.html">About LNAT</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="resources.html">Resources</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="pricing.html">Pricing</a>
                    </li>
                </ul>
                
                <div class="d-flex gap-2">
                    <button class="btn btn-outline-primary" onclick="signIn()">Sign In</button>
                    <button class="btn btn-primary" onclick="getStarted()">Get Started</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1><i class="fas fa-bug me-2"></i>LNAT Error Log</h1>
            <p>Track your mistakes, identify patterns, and improve your LNAT performance systematically</p>
        </div>
    </section>

    <div class="container">
        <!-- Data Storage Warning -->
        <div class="data-warning">
            <h5><i class="fas fa-exclamation-triangle me-2"></i>Important: Data Storage Information</h5>
            <p><strong>Your error log data is stored locally in your browser.</strong> Please be aware of the following:</p>
            <ul>
                <li>Data will be lost if you clear your browser data or use incognito/private mode</li>
                <li>Data cannot be accessed from different devices or browsers</li>
                <li>We recommend exporting your data regularly as a backup</li>
            </ul>
            <div class="backup-buttons">
                <button class="btn btn-warning btn-sm" onclick="exportData()">
                    <i class="fas fa-download me-1"></i>Export My Data
                </button>
                <button class="btn btn-info btn-sm" onclick="importData()">
                    <i class="fas fa-upload me-1"></i>Import Data
                </button>
                <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleImport(event)">
            </div>
        </div>

        <!-- Add Error Form -->
        <div class="error-form">
            <h3><i class="fas fa-plus-circle me-2"></i>Log a New Error</h3>
            <form id="errorForm" onsubmit="addError(event)">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-section">
                            <h4>Test Information</h4>
                            <div class="mb-3">
                                <label for="testNumber" class="form-label">Test Number</label>
                                <input type="number" class="form-control" id="testNumber" min="1" required>
                            </div>
                            <div class="mb-3">
                                <label for="questionNumber" class="form-label">Question Number</label>
                                <input type="number" class="form-control" id="questionNumber" min="1" max="42" required>
                            </div>
                            <div class="mb-3">
                                <label for="testDate" class="form-label">Date</label>
                                <input type="date" class="form-control" id="testDate" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="form-section">
                            <h4>Question Details</h4>
                            <div class="mb-3">
                                <label for="questionType" class="form-label">Question Type</label>
                                <select class="form-select" id="questionType" required>
                                    <option value="">Select question type...</option>
                                    <option value="main-conclusion">Main Conclusion</option>
                                    <option value="assumption">Assumption</option>
                                    <option value="strengthen">Strengthen</option>
                                    <option value="weaken">Weaken</option>
                                    <option value="inference">Inference</option>
                                    <option value="parallel">Parallel Reasoning</option>
                                    <option value="flaw">Logical Flaw</option>
                                    <option value="method">Method of Reasoning</option>
                                </select>
                            </div>
                            <div class="row">
                                <div class="col-6">
                                    <label for="yourAnswer" class="form-label">Your Answer</label>
                                    <select class="form-select" id="yourAnswer" required>
                                        <option value="">Select...</option>
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="C">C</option>
                                        <option value="D">D</option>
                                        <option value="E">E</option>
                                    </select>
                                </div>
                                <div class="col-6">
                                    <label for="correctAnswer" class="form-label">Correct Answer</label>
                                    <select class="form-select" id="correctAnswer" required>
                                        <option value="">Select...</option>
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="C">C</option>
                                        <option value="D">D</option>
                                        <option value="E">E</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h4>Error Analysis</h4>
                    <div class="mb-3">
                        <label for="errorCategory" class="form-label">Error Category</label>
                        <select class="form-select" id="errorCategory" required>
                            <option value="">Select error type...</option>
                            <option value="misread">Misread/Misunderstood Question</option>
                            <option value="time">Time Pressure/Rushed Decision</option>
                            <option value="knowledge">Knowledge Gap</option>
                            <option value="elimination">Poor Elimination Strategy</option>
                            <option value="distractor">Fell for Distractor Answer</option>
                            <option value="detail">Missed Key Passage Detail</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="reasoning" class="form-label">Why did you choose the wrong answer?</label>
                        <textarea class="form-control" id="reasoning" rows="3" placeholder="Explain your thought process..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="correctReasoning" class="form-label">Correct reasoning / What you learned</label>
                        <textarea class="form-control" id="correctReasoning" rows="3" placeholder="Explain the correct approach..."></textarea>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save me-2"></i>Log Error
                </button>
            </form>
        </div>

        <!-- Error Log Display -->
        <div class="error-log-container">
            <div class="error-log-header">
                <h3><i class="fas fa-list me-2"></i>Your Error Log (<span id="errorCount">0</span> entries)</h3>
                <div class="log-controls">
                    <button class="btn btn-light btn-sm" onclick="clearAllErrors()">
                        <i class="fas fa-trash me-1"></i>Clear All
                    </button>
                    <button class="btn btn-light btn-sm" onclick="printLog()">
                        <i class="fas fa-print me-1"></i>Print
                    </button>
                    <select class="form-select form-select-sm" id="filterCategory" onchange="filterErrors()" style="width: auto;">
                        <option value="">All Categories</option>
                        <option value="misread">Misread Question</option>
                        <option value="time">Time Pressure</option>
                        <option value="knowledge">Knowledge Gap</option>
                        <option value="elimination">Poor Elimination</option>
                        <option value="distractor">Distractor Answer</option>
                        <option value="detail">Missed Detail</option>
                    </select>
                </div>
            </div>
            
            <div id="errorLogTable">
                <div class="empty-state">
                    <i class="fas fa-clipboard-list"></i>
                    <h4>No errors logged yet</h4>
                    <p>Start tracking your mistakes to identify improvement patterns</p>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Initialize error log
        let errorLog = JSON.parse(localStorage.getItem('lnatErrorLog')) || [];
        
        // Set today's date as default
        document.getElementById('testDate').value = new Date().toISOString().split('T')[0];
        
        // Load existing errors
        window.addEventListener('load', function() {
            displayErrors();
            updateErrorCount();
        });
        
        // Add new error
        function addError(event) {
            event.preventDefault();
            
            const error = {
                id: Date.now(),
                testNumber: parseInt(document.getElementById('testNumber').value),
                questionNumber: parseInt(document.getElementById('questionNumber').value),
                date: document.getElementById('testDate').value,
                questionType: document.getElementById('questionType').value,
                yourAnswer: document.getElementById('yourAnswer').value,
                correctAnswer: document.getElementById('correctAnswer').value,
                errorCategory: document.getElementById('errorCategory').value,
                reasoning: document.getElementById('reasoning').value,
                correctReasoning: document.getElementById('correctReasoning').value,
                dateLogged: new Date().toISOString()
            };
            
            errorLog.push(error);
            saveErrorLog();
            displayErrors();
            updateErrorCount();
            
            // Reset form
            document.getElementById('errorForm').reset();
            document.getElementById('testDate').value = new Date().toISOString().split('T')[0];
            
            // Show success message
            showNotification('Error logged successfully!', 'success');
        }
        
        // Display errors in table
        function displayErrors() {
            const container = document.getElementById('errorLogTable');
            
            if (errorLog.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <h4>No errors logged yet</h4>
                        <p>Start tracking your mistakes to identify improvement patterns</p>
                    </div>
                `;
                return;
            }
            
            const sortedErrors = [...errorLog].sort((a, b) => new Date(b.dateLogged) - new Date(a.dateLogged));
            
            let tableHTML = `
                <table class="error-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Test</th>
                            <th>Q#</th>
                            <th>Type</th>
                            <th>Your/Correct</th>
                            <th>Category</th>
                            <th>Notes</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            sortedErrors.forEach(error => {
                const categoryClass = `category-${error.errorCategory}`;
                const formattedDate = new Date(error.date).toLocaleDateString();
                
                tableHTML += `
                    <tr>
                        <td>${formattedDate}</td>
                        <td>${error.testNumber}</td>
                        <td>${error.questionNumber}</td>
                        <td>${error.questionType}</td>
                        <td><strong>${error.yourAnswer}</strong> / <span style="color: var(--success-color);">${error.correctAnswer}</span></td>
                        <td><span class="error-category ${categoryClass}">${getCategoryLabel(error.errorCategory)}</span></td>
                        <td style="max-width: 200px; overflow: hidden; text-overflow: ellipsis;" title="${error.reasoning}">${error.reasoning.substring(0, 50)}${error.reasoning.length > 50 ? '...' : ''}</td>
                        <td><button class="delete-btn" onclick="deleteError(${error.id})"><i class="fas fa-trash"></i></button></td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody></table>';
            container.innerHTML = tableHTML;
        }
        
        // Helper function to get category labels
        function getCategoryLabel(category) {
            const labels = {
                'misread': 'Misread',
                'time': 'Time Pressure',
                'knowledge': 'Knowledge Gap',
                'elimination': 'Poor Elimination',
                'distractor': 'Distractor',
                'detail': 'Missed Detail'
            };
            return labels[category] || category;
        }
        
        // Delete error
        function deleteError(id) {
            if (confirm('Are you sure you want to delete this error entry?')) {
                errorLog = errorLog.filter(error => error.id !== id);
                saveErrorLog();
                displayErrors();
                updateErrorCount();
                showNotification('Error entry deleted', 'info');
            }
        }
        
        // Clear all errors
        function clearAllErrors() {
            if (confirm('Are you sure you want to clear all error entries? This cannot be undone.')) {
                errorLog = [];
                saveErrorLog();
                displayErrors();
                updateErrorCount();
                showNotification('All error entries cleared', 'info');
            }
        }
        
        // Filter errors by category
        function filterErrors() {
            const selectedCategory = document.getElementById('filterCategory').value;
            const rows = document.querySelectorAll('.error-table tbody tr');
            
            rows.forEach(row => {
                if (!selectedCategory) {
                    row.style.display = '';
                } else {
                    const categoryCell = row.cells[5].querySelector('.error-category');
                    const hasCategory = categoryCell && categoryCell.classList.contains(`category-${selectedCategory}`);
                    row.style.display = hasCategory ? '' : 'none';
                }
            });
        }
        
        // Save to localStorage
        function saveErrorLog() {
            localStorage.setItem('lnatErrorLog', JSON.stringify(errorLog));
        }
        
        // Update error count
        function updateErrorCount() {
            document.getElementById('errorCount').textContent = errorLog.length;
        }
        
        // Export data
        function exportData() {
            if (errorLog.length === 0) {
                showNotification('No data to export', 'warning');
                return;
            }
            
            const dataStr = JSON.stringify(errorLog, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `lnat-error-log-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(url);
            showNotification('Error log exported successfully!', 'success');
        }
        
        // Import data
        function importData() {
            document.getElementById('importFile').click();
        }
        
        function handleImport(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    if (Array.isArray(importedData)) {
                        if (confirm(`Import ${importedData.length} error entries? This will replace your current data.`)) {
                            errorLog = importedData;
                            saveErrorLog();
                            displayErrors();
                            updateErrorCount();
                            showNotification('Data imported successfully!', 'success');
                        }
                    } else {
                        showNotification('Invalid file format', 'danger');
                    }
                } catch (error) {
                    showNotification('Error reading file', 'danger');
                }
            };
            reader.readAsText(file);
        }
        
        // Print log
        function printLog() {
            window.print();
        }
        
        // Show notification
        function showNotification(message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
            alertDiv.style.cssText = 'top: 100px; right: 20px; z-index: 9999; min-width: 300px;';
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(alertDiv);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.parentNode.removeChild(alertDiv);
                }
            }, 3000);
        }
        
        // Navigation functions
        function signIn() {
            window.location.href = 'login.html';
        }
        
        function getStarted() {
            window.location.href = 'register.html';
        }
    </script>
</body>
</html>
