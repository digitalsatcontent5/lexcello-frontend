<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6EV4Y6N8M5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-6EV4Y6N8M5');
</script>
<link rel="icon" type="image/png" href="/favicon.png">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free LNAT Diagnostic Test - Complete Online LNAT Preparation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #1a365d;
            --primary-hover: #2d4a66;
            --secondary-color: #2b6cb0;
            --accent-gold: #d69e2e;
            --text-dark: #1a202c;
            --text-light: #4a5568;
            --bg-light: #f7fafc;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
        }
        
        /* Navigation */
        .navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 1rem 0;
        }
        
        .navbar-brand {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary-color) !important;
            letter-spacing: -1px;
        }
        
        .nav-link {
            font-weight: 500;
            color: var(--text-dark) !important;
            margin: 0 0.5rem;
            transition: color 0.3s ease;
        }
        
        .nav-link:hover {
            color: var(--secondary-color) !important;
        }

        /* Added for collapsed navbar background */
        .navbar-collapse.show {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .btn-primary {
            background: var(--secondary-color);
            border: none;
            padding: 12px 24px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }
        
        .btn-outline-primary {
            color: var(--secondary-color);
            border-color: var(--secondary-color);
            padding: 12px 24px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-outline-primary:hover {
            background: var(--secondary-color);
            border-color: var(--secondary-color);
            color: white;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 100px 0 80px;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 300" fill="white" opacity="0.1"><path d="M0,100 C300,200 600,0 1000,100 L1000,300 L0,300 Z"/></svg>') no-repeat bottom;
            background-size: 100% 300px;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            line-height: 1.1;
        }
        
        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        
        .hero-stats {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 12px;
            margin-top: 2rem;
        }
        
        .stat-item {
            text-align: center;
            padding: 15px;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
            color: var(--accent-gold);
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* Features Section */
        .features {
            padding: 80px 0;
            background: white;
        }
        
        .feature-card {
            background: white;
            padding: 40px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border: 1px solid #e2e8f0;
            height: 100%;
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto 20px;
        }
        
        .feature-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-align: center;
        }
        
        .feature-card p {
            text-align: center;
            color: var(--text-light);
            line-height: 1.6;
        }
        
        /* Tests Overview */
        .tests-section {
            padding: 80px 0;
            background: var(--bg-light);
        }
        
        .test-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        .test-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        .test-status {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .status-available {
            background: #c6f6d5;
            color: #22543d;
        }
        
        .status-coming-soon {
            background: #fed7d7;
            color: #742a2a;
        }
        
        .test-card h4 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .test-details {
            margin-bottom: 20px;
        }
        
        .test-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .detail-label {
            color: var(--text-light);
        }
        
        .detail-value {
            font-weight: 600;
            color: var(--text-dark);
        }
        
        .test-action {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            border: none;
            transition: all 0.3s ease;
        }
        
        .btn-available {
            background: var(--secondary-color);
            color: white;
        }
        
        .btn-available:hover {
            background: var(--primary-hover);
        }
        
        .btn-disabled {
            background: #e2e8f0;
            color: #a0aec0;
            cursor: not-allowed;
        }
        
        /* Loading state */
        .loading-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            text-align: center;
            color: var(--text-light);
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--secondary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* CTA Section */
        .cta-section {
            background: var(--primary-color);
            color: white;
            padding: 80px 0;
        }
        
        .cta-content {
            text-align: center;
        }
        
        .cta-content h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        .cta-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .btn-cta {
            background: var(--accent-gold);
            color: var(--primary-color);
            border: none;
            padding: 16px 32px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .btn-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(214, 158, 46, 0.4);
        }
        
        /* Footer */
        .footer {
            background: #1a202c;
            color: white;
            padding: 60px 0 40px;
        }
        
        .footer-links {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: #a0aec0;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .footer-bottom {
            border-top: 1px solid #2d3748;
            padding-top: 30px;
            text-align: center;
            color: #718096;
        }
        
        /* Notification styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 9999;
            opacity: 0;
            transform: translateX(300px);
            transition: all 0.3s ease;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .notification.success {
            background: #28a745;
        }
        
        .notification.error {
            background: #dc3545;
        }
        
        .notification.info {
            background: #17a2b8;
        }
        
        /* User dropdown styles */
        .user-menu {
            position: relative;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .user-avatar:hover {
            background: var(--primary-hover);
        }
        
        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            padding: 10px 0;
            min-width: 200px;
            z-index: 1000;
            display: none;
        }
        
        .user-dropdown.show {
            display: block;
        }
        
        .user-dropdown a {
            display: block;
            padding: 10px 20px;
            color: var(--text-dark);
            text-decoration: none;
            transition: background 0.3s ease;
        }
        
        .user-dropdown a:hover {
            background: var(--bg-light);
        }
        
        .user-dropdown .divider {
            height: 1px;
            background: #e2e8f0;
            margin: 5px 0;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .navbar-brand {
                font-size: 1.5rem;
            }
            
            .hero-stats {
                margin-top: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <!-- Navigation Section - Updated with Blogs -->
<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        <a class="navbar-brand" href="index.html">Lexcello</a>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#home">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#tests">Practice Tests</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="about-lnat.html">About LNAT</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="resources.html">Resources</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="pricing.html">Pricing</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact</a>
                </li>
            </ul>
            
            <!-- Authentication buttons (shown when not logged in) -->
            <div class="d-flex gap-2" id="auth-buttons">
                <button class="btn btn-outline-primary" onclick="signIn()">Sign In</button>
                <button class="btn btn-primary" onclick="getStarted()">Get Started</button>
            </div>
            
            <!-- User menu (shown when logged in) -->
            <div class="user-menu" id="user-menu" style="display: none;">
                <div class="user-avatar" onclick="toggleUserDropdown()" id="user-avatar">
                    U
                </div>
                <div class="user-dropdown" id="user-dropdown">
                    <a href="dashboard.html">
                        <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                    </a>
                    <a href="profile.html">
                        <i class="fas fa-user me-2"></i>Profile
                    </a>
                    <a href="test-history.html">
                        <i class="fas fa-history me-2"></i>Test History
                    </a>
                    <div class="divider"></div>
                    <a href="#" onclick="signOut()">
                        <i class="fas fa-sign-out-alt me-2"></i>Sign Out
                    </a>
                </div>
            </div>
        </div>
    </div>
</nav>
    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <div class="hero-content">
                        <h1>Free LNAT Diagnostic Test - Complete Online LNAT Preparation</h1>
                        <p>Take our free LNAT diagnostic test to assess your current level, and unlock 10 comprehensive LNAT practice tests with detailed performance analytics and expert explanations for complete LNAT preparation.</p>
                        
                        <div class="d-flex gap-3">
                            <button class="btn btn-light btn-lg" onclick="startPracticeTest()">
                                <i class="fas fa-play me-2"></i>Start Free Diagnostic Test
                            </button>
                            <button class="btn btn-outline-light btn-lg" onclick="learnAboutLNAT()">
                                <i class="fas fa-info-circle me-2"></i>About LNAT
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <div class="hero-stats">
                        <div class="row">
                            <div class="col-4">
                                <div class="stat-item">
                                    <span class="stat-number">10</span>
                                    <span class="stat-label">Practice Tests</span>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="stat-item">
                                    <span class="stat-number">400+</span>
                                    <span class="stat-label">Questions</span>
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="stat-item">
                                    <span class="stat-number">95%</span>
                                    <span class="stat-label">Success Rate</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- LNAT Practice Tests Info Section -->
    <section class="tests-info" style="padding: 60px 0; background: white;">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h2 class="h3 text-primary mb-3">Why Choose Our LNAT Practice Tests?</h2>
                    <p class="mb-3">Our LNAT practice tests are specifically designed for the digital LNAT format introduced in 2024. Each practice test mirrors the authentic LNAT experience with 42 multiple-choice questions, 95-minute time limits, and the same logical reasoning challenges you'll face on test day.</p>
                    <p class="mb-3">Unlike generic practice tests, our LNAT preparation platform provides detailed performance analytics, identifying your strengths in areas like argument analysis, critical reasoning, and logical deduction. Track your progress across multiple LNAT practice tests and receive personalized recommendations.</p>
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <div class="d-flex align-items-center mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>Authentic digital LNAT format</span>
                            </div>
                            <div class="d-flex align-items-center mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>10 comprehensive practice tests</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex align-items-center mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>Detailed performance analytics</span>
                            </div>
                            <div class="d-flex align-items-center mb-2">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <span>Expert explanations for every question</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 text-center">
                    <div style="background: linear-gradient(135deg, var(--bg-light), white); padding: 30px; border-radius: 15px; border: 2px solid var(--secondary-color);">
                        <h4 class="text-primary mb-3">Start Your LNAT Prep</h4>
                        <p class="mb-3">Begin with our free diagnostic test to assess your current level</p>
                        <button class="btn btn-primary" onclick="startPracticeTest()">
                            <i class="fas fa-play me-2"></i>Take Free Diagnostic
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-4 fw-bold text-primary">Why Choose Lexcello</h2>
                <p class="lead">Comprehensive LNAT preparation designed for success</p>
            </div>
            
            <div class="row g-4">
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3>Authentic LNAT Questions</h3>
                        <p>Practice with questions that mirror the real LNAT format, difficulty, and style. Developed by legal education experts.</p>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3>Detailed Analytics</h3>
                        <p>Track your progress with comprehensive performance analysis, identifying strengths and areas for improvement.</p>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3>Timed Practice</h3>
                        <p>Experience real test conditions with authentic timing constraints to build confidence and time management skills.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Practice Tests Section -->
    <section class="tests-section" id="tests">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="display-4 fw-bold text-primary">LNAT Practice Tests Online</h2>
                <p class="lead">Complete series of 10 expert LNAT practice tests - start with our free diagnostic, then access premium preparation materials</p>
            </div>
            
            <!-- This row will be populated dynamically by JavaScript -->
            <div class="row g-4">
                <div class="col-12">
                    <div class="loading-card">
                        <div class="loading-spinner"></div>
                        Loading practice tests...
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-5">
                <div class="alert alert-info d-inline-block">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Loading test information...</strong>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <h2>Ready to Excel at the LNAT?</h2>
                <p>Join thousands of students who've improved their LNAT scores with our expert practice tests.</p>
                <button class="btn btn-cta" onclick="startPreparation()">
                    <i class="fas fa-rocket me-2"></i>Start Your Preparation Today
                </button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 mb-4">
                <h5 class="fw-bold mb-3">Lexcello</h5>
                <p class="text-light">Expert LNAT preparation platform designed to help aspiring law students excel in their admissions journey.</p>
                <div class="footer-links">
                    <a href="https://instagram.com/lexcello_lnat" target="_blank"><i class="fab fa-instagram me-2"></i>Instagram</a>
                    <a href="https://www.linkedin.com/in/lexcello-lnat-preparation-9417ba385/" target="_blank"><i class="fab fa-linkedin me-2"></i>LinkedIn</a>
                    <a href="contact.html"><i class="fas fa-envelope me-2"></i>Contact</a>
                </div>
            </div>
            
            <div class="col-lg-2 col-6 mb-4">
                <h6 class="fw-bold mb-3">Platform</h6>
                <div class="footer-links flex-column d-flex">
                    <a href="#tests">Practice Tests</a>
                    <a href="dashboard.html">Performance Analytics</a>
                    <a href="about-lnat.html">Study Resources</a>
                    <a href="#tests">Mock Exams</a>
                </div>
            </div>
            
            <div class="col-lg-2 col-6 mb-4">
                <h6 class="fw-bold mb-3">Resources</h6>
                <div class="footer-links flex-column d-flex">
                    <a href="about-lnat.html">LNAT Guide</a>
                    <a href="about-lnat.html#format">Test Format</a>
                    <a href="about-lnat.html#scoring">Scoring</a>
                    <a href="pricing.html#faq">FAQ</a>
                </div>
            </div>
            
            <div class="col-lg-4 mb-4">
                <h6 class="fw-bold mb-3">Stay Updated</h6>
                <p>Get notified when new practice tests are released.</p>
                <div class="input-group">
                    <input type="email" class="form-control" placeholder="Enter your email">
                    <button class="btn btn-primary">Subscribe</button>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="text-center">
                <div class="footer-links mb-3 d-flex justify-content-center flex-wrap gap-3">
                    <a href="index.html">Home</a>
                    <a href="about-lnat.html">About LNAT</a>
                    <a href="pricing.html">Pricing</a>
                    <a href="contact.html">Contact</a>
                    <a href="privacy-policy.html">Privacy Policy</a>
                    <a href="terms-of-service.html">Terms of Service</a>
                </div>
                <p>&copy; 2024 Lexcello. All rights reserved. LNAT® is a trademark of the LNAT Consortium.</p>
            </div>
        </div>
    </div>
</footer>
    <!-- Notification container -->
    <div id="notification" class="notification"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Configuration
        const API_BASE_URL = 'https://lexcello-backend.onrender.com/api';
        
        // State management
        let currentUser = null;
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            checkAuthStatus();
            loadTestsStatus();
            
            // Add click listener to close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                const userMenu = document.getElementById('user-menu');
                const dropdown = document.getElementById('user-dropdown');
                
                if (userMenu && !userMenu.contains(event.target)) {
                    dropdown.classList.remove('show');
                }
            });
        });
        
        // Load test status dynamically
        async function loadTestsStatus() {
            try {
                // Show loading state
                showLoadingState();
                
                const testStatuses = await checkTestContent();
                updateTestsSection(testStatuses);
                updateHeroStats(testStatuses);
            } catch (error) {
                console.error('Error loading test status:', error);
                showErrorState();
            }
        }
        
        // Show loading state
        function showLoadingState() {
            const testsContainer = document.querySelector('.tests-section .row.g-4');
            testsContainer.innerHTML = `
                <div class="col-12">
                    <div class="loading-card">
                        <div class="loading-spinner"></div>
                        Loading practice tests...
                    </div>
                </div>
            `;
        }
        
        // Show error state
        function showErrorState() {
            const testsContainer = document.querySelector('.tests-section .row.g-4');
            testsContainer.innerHTML = `
                <div class="col-12">
                    <div class="alert alert-warning text-center">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Unable to load test information.</strong><br>
                        Please refresh the page or try again later.
                        <br><br>
                        <button class="btn btn-primary" onclick="loadTestsStatus()">
                            <i class="fas fa-refresh me-2"></i>Try Again
                        </button>
                    </div>
                </div>
            `;
        }
        
        // Check which tests actually have questions
        async function checkTestContent() {
            const testStatuses = {};
            
            // Check tests 1-10 for content
            for (let testId = 1; testId <= 10; testId++) {
                try {
                    const response = await fetch(`${API_BASE_URL}/tests/${testId}/status`);
                    
                    if (response.ok) {
                        const data = await response.json();
                        let questionCount = 0;
                        
                        // Handle different response formats
                    if (data.questionCount !== undefined) {
                        questionCount = data.questionCount;
                        } else if (Array.isArray(data)) {
                            questionCount = data.length;
                        } else if (data.questions && Array.isArray(data.questions)) {
                            questionCount = data.questions.length;
                        } else if (data.message && data.message.includes('questions found')) {
                            const match = data.message.match(/(\d+)\s+questions?\s+found/i);
                            questionCount = match ? parseInt(match[1]) : 0;
                        } else if (data.count !== undefined) {
                            questionCount = data.count;
                        }
                        
                        testStatuses[testId] = {
                            hasContent: questionCount > 0,
                            questionCount: questionCount,
                            status: questionCount > 0 ? 'available' : 'empty'
                        };
                    } else {
                        testStatuses[testId] = {
                            hasContent: false,
                            questionCount: 0,
                            status: 'empty'
                        };
                    }
                } catch (error) {
                    testStatuses[testId] = {
                        hasContent: false,
                        questionCount: 0,
                        status: 'error'
                    };
                }
            }
            
            return testStatuses;
        }
        
        // Update the tests section with dynamic data
        function updateTestsSection(testStatuses) {
            const testsWithContent = Object.values(testStatuses).filter(s => s.hasContent).length;
            const testsWithoutContent = 10 - testsWithContent;
            
            // Update section description
            const sectionDescription = document.querySelector('.tests-section .lead');
            if (testsWithContent === 0) {
                sectionDescription.textContent = 'Complete series of 10 practice tests - all coming soon';
            } else if (testsWithContent === 1) {
                sectionDescription.textContent = `Complete series of 10 practice tests - ${testsWithContent} available now, ${testsWithoutContent} more coming soon`;
            } else {
                sectionDescription.textContent = `Complete series of 10 practice tests - ${testsWithContent} available now, ${testsWithoutContent} more coming soon`;
            }
            
            // Generate test cards dynamically
            generateTestCards(testStatuses);
            
            // Update bottom notification
            const bottomAlert = document.querySelector('.tests-section .alert');
            if (testsWithoutContent > 0) {
                bottomAlert.innerHTML = `
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>${testsWithoutContent} additional practice tests coming soon!</strong> Sign up to be notified when they're released.
                `;
                bottomAlert.className = 'alert alert-info d-inline-block';
            } else {
                bottomAlert.innerHTML = `
                    <i class="fas fa-check-circle me-2"></i>
                    <strong>All 10 practice tests are now available!</strong> Start your comprehensive LNAT preparation.
                `;
                bottomAlert.className = 'alert alert-success d-inline-block';
            }
        }
        
        // Generate test cards dynamically
        function generateTestCards(testStatuses) {
            const testsContainer = document.querySelector('.tests-section .row.g-4');
            
            // Clear existing content
            testsContainer.innerHTML = '';
            
            // Test configuration
            const testConfigs = {
                1: { name: 'Foundation', difficulty: 'Beginner-Intermediate' },
                2: { name: 'Building Skills', difficulty: 'Intermediate' },
                3: { name: 'Advanced', difficulty: 'Advanced' },
                4: { name: 'Mock Exam', difficulty: 'Full Exam Simulation' },
                5: { name: 'Strategic Practice', difficulty: 'Intermediate-Advanced' },
                6: { name: 'Critical Thinking', difficulty: 'Advanced' },
                7: { name: 'Final Preparation', difficulty: 'Advanced' },
                8: { name: 'Master Challenge', difficulty: 'Expert Level' },
                9: { name: 'Comprehensive Review', difficulty: 'Full Exam Simulation' },
                10: { name: 'Ultimate Test', difficulty: 'Expert Level' }
            };
            
            // Generate cards for tests 1-10
            for (let testId = 1; testId <= 10; testId++) {
                const status = testStatuses[testId] || { hasContent: false, questionCount: 0, status: 'empty' };
                const config = testConfigs[testId];
                
                const cardHtml = `
                    <div class="col-lg-6">
                        <div class="test-card">
                            <div class="test-status ${status.hasContent ? 'status-available' : 'status-coming-soon'}">
                                ${status.hasContent ? 'Available' : 'Coming Soon'}
                            </div>
                            <h4>Practice Test ${testId} - ${config.name}</h4>
                            <div class="test-details">
                                <div class="test-detail">
                                    <span class="detail-label">Questions:</span>
                                    <span class="detail-value">${status.hasContent ? status.questionCount : '42'} Multiple Choice</span>
                                </div>
                                <div class="test-detail">
                                    <span class="detail-label">Time Limit:</span>
                                    <span class="detail-value">95 Minutes</span>
                                </div>
                                <div class="test-detail">
                                    <span class="detail-label">Difficulty:</span>
                                    <span class="detail-value">${config.difficulty}</span>
                                </div>
                            </div>
                            <button class="test-action ${status.hasContent ? 'btn-available' : 'btn-disabled'}" 
                                    ${status.hasContent ? `onclick="startTestFromHomepage(${testId})"` : 'disabled'}>
                                ${status.hasContent ? 'Start Practice Test' : 'Coming Soon'}
                            </button>
                        </div>
                    </div>
                `;
                
                testsContainer.insertAdjacentHTML('beforeend', cardHtml);
            }
        }
        
        // Update hero section stats
        function updateHeroStats(testStatuses) {
            const testsWithContent = Object.values(testStatuses).filter(s => s.hasContent).length;
            const totalQuestions = Object.values(testStatuses).reduce((sum, test) => sum + test.questionCount, 0);
            
            // Update stats in hero section
            const statNumbers = document.querySelectorAll('.stat-number');
            if (statNumbers[0]) statNumbers[0].textContent = testsWithContent || '10';
            if (statNumbers[1]) statNumbers[1].textContent = totalQuestions > 0 ? `${totalQuestions}+` : '400+';
            
            // Update labels if needed
            const statLabels = document.querySelectorAll('.stat-label');
            if (statLabels[0] && testsWithContent === 1) {
                statLabels[0].textContent = 'Practice Test';
            } else if (statLabels[0]) {
                statLabels[0].textContent = 'Practice Tests';
            }
        }
        
        // Start test from homepage
        function startTestFromHomepage(testNumber) {
            if (currentUser) {
                // Check if user has premium access for tests beyond the first one
                if (testNumber > 1 && currentUser.subscriptionStatus !== 'premium') {
                    showNotification('Premium subscription required for this test', 'info');
                    window.location.href = 'pricing.html';
                } else {
                    window.location.href = `practice-test-1.html${testNumber > 1 ? '?test=' + testNumber : ''}`;
                }
            } else {
                showNotification('Please sign in to access practice tests', 'info');
                window.location.href = 'login.html';
            }
        }
        
        // Authentication functions
        async function checkAuthStatus() {
            const token = localStorage.getItem('authToken');
            if (token) {
                try {
                    const response = await fetch(`${API_BASE_URL}/auth/profile`, {
                        method: 'GET',
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        const userData = await response.json();
                        updateUIForLoggedInUser(userData);
                    } else {
                        // Token is invalid, remove it
                        localStorage.removeItem('authToken');
                        updateUIForLoggedOutUser();
                    }
                } catch (error) {
                    console.error('Error checking auth status:', error);
                    updateUIForLoggedOutUser();
                }
            } else {
                updateUIForLoggedOutUser();
            }
        }
        
        function updateUIForLoggedInUser(userData) {
            currentUser = userData;
            
            // Hide auth buttons, show user menu
            document.getElementById('auth-buttons').style.display = 'none';
            document.getElementById('user-menu').style.display = 'block';
            
            // Update user avatar with first letter of name or email
            const userAvatar = document.getElementById('user-avatar');
            const firstLetter = (userData.name || userData.email || 'U').charAt(0).toUpperCase();
            userAvatar.textContent = firstLetter;
            userAvatar.title = userData.email || 'User';
        }
        
        function updateUIForLoggedOutUser() {
            currentUser = null;
            
            // Show auth buttons, hide user menu
            document.getElementById('auth-buttons').style.display = 'flex';
            document.getElementById('user-menu').style.display = 'none';
        }
        
        function toggleUserDropdown() {
            const dropdown = document.getElementById('user-dropdown');
            dropdown.classList.toggle('show');
        }
        
        async function signOut() {
            try {
                // Call logout endpoint if available
                const token = localStorage.getItem('authToken');
                if (token) {
                    await fetch(`${API_BASE_URL}/auth/logout`, {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${token}`,
                            'Content-Type': 'application/json'
                        }
                    });
                }
            } catch (error) {
                console.error('Error during logout:', error);
            } finally {
                // Always clean up local storage and update UI
                localStorage.removeItem('authToken');
                updateUIForLoggedOutUser();
                showNotification('Successfully signed out', 'success');
                
                // Redirect to home if on a protected page
                if (window.location.pathname.includes('dashboard') || 
                    window.location.pathname.includes('profile')) {
                    window.location.href = 'index.html';
                }
            }
        }
        
        // Navigation functions
        function signIn() {
            window.location.href = 'login.html';
        }
        
        function getStarted() {
            // Check if user is logged in
            if (currentUser) {
                // Check subscription status
                if (currentUser.subscriptionStatus === 'premium') {
                    window.location.href = 'dashboard.html';
                } else {
                    // User is logged in but needs premium - go to pricing
                    window.location.href = 'pricing.html';
                }
            } else {
                window.location.href = 'register.html';
            }
        }
        
        function startPracticeTest() {
            // Check if user is logged in
            if (currentUser) {
                // Check if user has premium access
                if (currentUser.subscriptionStatus === 'premium') {
                    window.location.href = 'practice-test-1.html';
                } else {
                    showNotification('Premium subscription required for full access', 'info');
                    window.location.href = 'pricing.html';
                }
            } else {
                showNotification('Please sign in to access practice tests', 'info');
                window.location.href = 'login.html';
            }
        }
        
        function learnAboutLNAT() {
            window.location.href = 'about-lnat.html';
        }
        
        function viewTestDetails(testNumber) {
            // For any test that has content, redirect based on subscription
            if (currentUser) {
                if (testNumber === 1 || currentUser.subscriptionStatus === 'premium') {
                    window.location.href = `practice-test-1.html${testNumber > 1 ? '?test=' + testNumber : ''}`;
                } else {
                    showNotification('Premium subscription required for this test', 'info');
                    window.location.href = 'pricing.html';
                }
            } else {
                showNotification('Please sign in to access practice tests', 'info');
                window.location.href = 'login.html';
            }
        }
        
        function startPreparation() {
            if (currentUser) {
                // Check subscription status
                if (currentUser.subscriptionStatus === 'premium') {
                    window.location.href = 'dashboard.html';
                } else {
                    // User needs to upgrade
                    window.location.href = 'pricing.html';
                }
            } else {
                window.location.href = 'register.html';
            }
        }
        
        // Utility functions
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            // Auto-hide after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Smooth scrolling for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>


